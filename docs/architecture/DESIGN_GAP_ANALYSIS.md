# é™æ€è®¾è®¡ç¨¿ vs ä»£ç å®ç° - åŠŸèƒ½ç¼ºå¤±åˆ†ææŠ¥å‘Š

> **ç”Ÿæˆæ—¶é—´**: 2026-01-15  
> **è®¾è®¡ç¨¿æ¥æº**: `docs/stitch_project_workbench_overview_2/`  
> **åˆ†æèŒƒå›´**: 52 ä¸ªè®¾è®¡é¡µé¢

---

## ä¸€ã€è®¾è®¡ç¨¿ç›®å½•ç»“æ„æ€»è§ˆ

### 1. é¡¹ç›®å·¥ä½œå° (Project Workbench)

| è®¾è®¡ç¨¿ | æ–‡ä»¶è·¯å¾„ | å®ç°çŠ¶æ€ |
|-------|---------|---------|
| Project Overview | `project_workbench_-_overview/` | âœ… å·²å®ç° (éƒ¨åˆ†) |
| Memory Graph 1-4 | `project_workbench_-_memory_graph_1~4/` | âš ï¸ éƒ¨åˆ†å®ç° |
| Memory Entry (Text Input) | `memory_entry_-_text_input/` | âœ… å·²å®ç° |
| Memory Retrieval (Smart Search) | `memory_retrieval_-_smart_search/` | âš ï¸ éƒ¨åˆ†å®ç° |
| Recall Details (Content Display) | `recall_details_-_content_display/` | âœ… å·²å®ç° (éƒ¨åˆ†) |

### 2. Schema ç®¡ç†

| è®¾è®¡ç¨¿ | æ–‡ä»¶è·¯å¾„ | å®ç°çŠ¶æ€ |
|-------|---------|---------|
| Schema Overview | `schema_overview/` | âœ… å·²å®ç° |
| Entity Type Management 1-2 | `entity_type_management_1~2/` | âœ… å·²å®ç° |
| Relationship Type Management | `relationship_type_management/` | âœ… å·²å®ç° |
| Edge Type Map Page | `edge_type_map_page/` | âœ… å·²å®ç° |

### 3. ç»Ÿä¸€æ™ºèƒ½ä½“å·¥ä½œå° (Agent Workspace)

| è®¾è®¡ç¨¿ | æ–‡ä»¶è·¯å¾„ | å®ç°çŠ¶æ€ |
|-------|---------|---------|
| Unified Agent Workspace - Idle State 1-4 | `unified_agent_workspace_-_idle_state_1~4/` | âš ï¸ éƒ¨åˆ†å®ç° |
| Agent Chat Interface | `agent_chat_interface/` | âœ… å·²å®ç° |
| Agent Activity Log & Visualization 1-6 | `agent_activity_log_&_visualization_1~6/` | âŒ æœªå®ç° |
| Operator Agent - System Sandbox Interface 1-4 | `operator_agent_-_system_sandbox_interface_1~4/` | âŒ æœªå®ç° |

### 4. SubAgent ç®¡ç†

| è®¾è®¡ç¨¿ | æ–‡ä»¶è·¯å¾„ | å®ç°çŠ¶æ€ |
|-------|---------|---------|
| SubAgent Management 1-9 | `subagent_management_1~9/` | âŒ æœªå®ç° |
| SubAgent Router Dashboard | `subagent_router_dashboard/` | âŒ æœªå®ç° |
| Skill Registry | `skill_registry/` | âŒ æœªå®ç° |
| Workflow Pattern Management | `workflow_pattern_management/` | âš ï¸ éƒ¨åˆ†å®ç° |
| Pattern Laboratory (Experience Engine) | `pattern_laboratory_(experience_engine)/` | âŒ æœªå®ç° |

### 5. ç§Ÿæˆ·æ§åˆ¶å° (Tenant Console)

| è®¾è®¡ç¨¿ | æ–‡ä»¶è·¯å¾„ | å®ç°çŠ¶æ€ |
|-------|---------|---------|
| Tenant Console - Overview 1-3 | `tenant_console_-_overview_1~3/` | âœ… å·²å®ç° |
| Tenant Console - Project Management 1-3 | `tenant_console_-_project_management_1~3/` | âœ… å·²å®ç° |
| Tenant Console - Member Management | `tenant_console_-_member_management/` | âœ… å·²å®ç° |
| Tenant Console - Tenant Profile & Settings | `tenant_console_-_tenant_profile_and_settings/` | âœ… å·²å®ç° |
| New Tenant Registration | `new_tenant_registration/` | âœ… å·²å®ç° |
| Task Status Dashboard | `task_status_dashboard/` | âœ… å·²å®ç° |

### 6. ç”¨æˆ·ä¸­å¿ƒ

| è®¾è®¡ç¨¿ | æ–‡ä»¶è·¯å¾„ | å®ç°çŠ¶æ€ |
|-------|---------|---------|
| User Center - Personal Profile | `user_center_-_personal_profile/` | âœ… å·²å®ç° |

---

## äºŒã€åŠŸèƒ½ç¼ºå¤±æ¸…å•

### ğŸ”´ å®Œå…¨æœªå®ç° (é«˜ä¼˜å…ˆçº§)

#### 1. Agent Activity Log & Visualization (æ™ºèƒ½ä½“æ´»åŠ¨æ—¥å¿—ä¸å¯è§†åŒ–)

**è®¾è®¡è¦æ±‚ï¼š**
- å®æ—¶æ´»åŠ¨æ—¥å¿—æµå±•ç¤º
- å·¥å…·è°ƒç”¨å¯è§†åŒ– (å›¾å½¢åŒ–å±•ç¤ºè°ƒç”¨é“¾)
- Token ä½¿ç”¨é‡ç»Ÿè®¡
- æ‰§è¡Œæ—¶é—´åˆ†æå›¾è¡¨
- é”™è¯¯è¿½è¸ªä¸è°ƒè¯•ç•Œé¢

**å½“å‰çŠ¶æ€ï¼š** ä»…æœ‰åŸºç¡€çš„ `AgentLogs` é¡µé¢ï¼Œç¼ºå°‘å¯è§†åŒ–ç»„ä»¶

**æ‰€éœ€æ–‡ä»¶ï¼š**
- `web/src/components/agent/ActivityTimeline.tsx`
- `web/src/components/agent/TokenUsageChart.tsx`
- `web/src/components/agent/ToolCallVisualization.tsx`

#### 2. Operator Agent - System Sandbox Interface (è¿è¥æ™ºèƒ½ä½“-ç³»ç»Ÿæ²™ç®±)

**è®¾è®¡è¦æ±‚ï¼š**
- å®Œæ•´çš„æ²™ç®±æ‰§è¡Œç¯å¢ƒ UI
- ä»£ç æ‰§è¡Œç›‘æ§é¢æ¿
- æ–‡ä»¶ç³»ç»Ÿæµè§ˆå™¨
- ç½‘ç»œè¯·æ±‚ç›‘æ§
- å®‰å…¨è¾¹ç•Œå±•ç¤º

**å½“å‰çŠ¶æ€ï¼š** å®Œå…¨æœªå®ç°

#### 3. SubAgent Management (å­æ™ºèƒ½ä½“ç®¡ç†)

**è®¾è®¡è¦æ±‚ï¼š**
- SubAgent åˆ—è¡¨å±•ç¤º
- SubAgent é…ç½®ç¼–è¾‘å™¨
- SubAgent çŠ¶æ€ç›‘æ§
- æŠ€èƒ½ç»‘å®šç•Œé¢
- æƒé™é…ç½®é¢æ¿
- éƒ¨ç½²/åœæ­¢æ§åˆ¶

**å½“å‰çŠ¶æ€ï¼š** ä»…æœ‰ `AgentDashboard` åŸºç¡€æ¡†æ¶

**æ‰€éœ€æ–‡ä»¶ï¼š**
- `web/src/pages/tenant/SubAgentList.tsx`
- `web/src/components/agent/SubAgentCard.tsx`
- `web/src/components/agent/SubAgentConfigEditor.tsx`

#### 4. SubAgent Router Dashboard (å­æ™ºèƒ½ä½“è·¯ç”±ä»ªè¡¨æ¿)

**è®¾è®¡è¦æ±‚ï¼š**
- å®æ—¶è·¯ç”±æµç¨‹å¯è§†åŒ– (SVG åŠ¨ç”»)
- ä»»åŠ¡åˆ†å‘ç»Ÿè®¡
- ä¸Šä¸‹æ–‡å…±äº«çŠ¶æ€
- æ€§èƒ½çŸ©é˜µè¡¨æ ¼
- å†…å­˜è´Ÿè½½ç›‘æ§

**å½“å‰çŠ¶æ€ï¼š** å®Œå…¨æœªå®ç°

#### 5. Skill Registry (æŠ€èƒ½æ³¨å†Œä¸­å¿ƒ)

**è®¾è®¡è¦æ±‚ï¼š**
- æŠ€èƒ½åˆ—è¡¨ç®¡ç†
- YAML/JSON é…ç½®ç¼–è¾‘å™¨
- ç³»ç»Ÿæç¤ºè¯æ¨¡æ¿ç¼–è¾‘
- å·¥å…·/API é›†æˆç®¡ç†
- æƒé™ä¸å®‰å…¨é…ç½®
- ç‰ˆæœ¬æ§åˆ¶ä¸éƒ¨ç½²

**å½“å‰çŠ¶æ€ï¼š** å®Œå…¨æœªå®ç°

**æ‰€éœ€æ–‡ä»¶ï¼š**
- `web/src/pages/tenant/SkillRegistry.tsx`
- `web/src/components/agent/SkillEditor.tsx`
- `web/src/components/agent/SkillCard.tsx`

#### 6. Pattern Laboratory (æ¨¡å¼å®éªŒå®¤/ç»éªŒå¼•æ“)

**è®¾è®¡è¦æ±‚ï¼š**
- å·¥ä½œæµæ¨¡å¼åˆ›å»ºå™¨
- æ¨¡å¼æµ‹è¯•æ²™ç®±
- æ•ˆæœåˆ†æä»ªè¡¨æ¿
- æ¨¡å¼æ¨èç³»ç»Ÿ

**å½“å‰çŠ¶æ€ï¼š** ä»…æœ‰ `WorkflowPatterns` åŸºç¡€åˆ—è¡¨

---

### ğŸŸ¡ éƒ¨åˆ†å®ç° (ä¸­ä¼˜å…ˆçº§)

#### 1. Memory Graph Visualization (è®°å¿†å›¾è°±å¯è§†åŒ–)

| åŠŸèƒ½ç‚¹ | è®¾è®¡ç¨¿ | å½“å‰å®ç° |
|--------|--------|----------|
| èŠ‚ç‚¹æ‹–æ‹½äº¤äº’ | âœ… æœ‰ | âš ï¸ åŸºç¡€æ”¯æŒ |
| èŠ‚ç‚¹è¯¦æƒ…ä¾§è¾¹é¢æ¿ | âœ… æœ‰ | âŒ ç¼ºå¤± |
| å…³ç³»æ ‡ç­¾æ˜¾ç¤º | âœ… æœ‰ | âŒ ç¼ºå¤± |
| å›¾ä¾‹ç­›é€‰ | âœ… æœ‰ | âŒ ç¼ºå¤± |
| å·¥å…·æ  (é€‰æ‹©/å¹³ç§»/å¥—ç´¢) | âœ… æœ‰ | âŒ ç¼ºå¤± |
| ç¼©æ”¾æ§ä»¶ | âœ… æœ‰ | âš ï¸ åŸºç¡€ |
| åŠ¨ç”»æ•ˆæœ (è„‰å†²/å‘å…‰) | âœ… æœ‰ | âŒ ç¼ºå¤± |

#### 2. Memory Retrieval - Smart Search (æ™ºèƒ½æœç´¢)

| åŠŸèƒ½ç‚¹ | è®¾è®¡ç¨¿ | å½“å‰å®ç° |
|--------|--------|----------|
| é«˜çº§é…ç½®é¢æ¿ | âœ… æœ‰ | âš ï¸ éƒ¨åˆ† |
| æ£€ç´¢æ¨¡å¼åˆ‡æ¢ (Hybrid/Node Distance) | âœ… æœ‰ | âŒ ç¼ºå¤± |
| ç­–ç•¥é€‰æ‹©å™¨ (RRF/Cross-Encoder/MMR) | âœ… æœ‰ | âŒ ç¼ºå¤± |
| Focal Node UUID è¾“å…¥ | âœ… æœ‰ | âŒ ç¼ºå¤± |
| Cross-Encoder å®¢æˆ·ç«¯é€‰æ‹© | âœ… æœ‰ | âŒ ç¼ºå¤± |
| æ—¶é—´èŒƒå›´ç­›é€‰ | âœ… æœ‰ | âš ï¸ åŸºç¡€ |
| æ ‡ç­¾ç­›é€‰ | âœ… æœ‰ | âœ… æœ‰ |
| å›¾è°±å¯è§†åŒ–é¢„è§ˆ | âœ… æœ‰ | âŒ ç¼ºå¤± |
| å¡ç‰‡å¼ç»“æœå±•ç¤º | âœ… æœ‰ | âš ï¸ åŸºç¡€ |

#### 3. Unified Agent Workspace - Idle State (ç»Ÿä¸€æ™ºèƒ½ä½“å·¥ä½œå°)

| åŠŸèƒ½ç‚¹ | è®¾è®¡ç¨¿ | å½“å‰å®ç° |
|--------|--------|----------|
| æ¬¢è¿ç•Œé¢ | âœ… æœ‰ | âœ… æœ‰ |
| å»ºè®®ä»»åŠ¡å¡ç‰‡ | âœ… æœ‰ | âš ï¸ éƒ¨åˆ† |
| æµ®åŠ¨è¾“å…¥æ  | âœ… æœ‰ | âœ… æœ‰ |
| é™„ä»¶æŒ‰é’® | âœ… æœ‰ | âŒ ç¼ºå¤± |
| è¯­éŸ³è¾“å…¥æŒ‰é’® | âœ… æœ‰ | âŒ ç¼ºå¤± |

#### 4. Memory Detail Page (è®°å¿†è¯¦æƒ…é¡µ)

| åŠŸèƒ½ç‚¹ | è®¾è®¡ç¨¿ | å½“å‰å®ç° |
|--------|--------|----------|
| ä½œè€…å¤´åƒå±•ç¤º | âœ… æœ‰ | âŒ ç¼ºå¤± |
| ç‰ˆæœ¬æ ‡ç­¾ | âœ… æœ‰ | âŒ ç¼ºå¤± |
| å¤šæ ‡ç­¾é¡µ (Content/Metadata/History/Raw) | âœ… æœ‰ | âŒ ç¼ºå¤± |
| å³ä¾§çŸ¥è¯†ä¸Šä¸‹æ–‡é¢æ¿ | âœ… æœ‰ | âŒ ç¼ºå¤± |
| å›¾è°±å…³ç³»å°éƒ¨ä»¶ | âœ… æœ‰ | âŒ ç¼ºå¤± |
| ç›¸å…³è®°å¿†åˆ—è¡¨ | âœ… æœ‰ | âŒ ç¼ºå¤± |
| æ ‡ç­¾ç®¡ç† | âœ… æœ‰ | âœ… æœ‰ |

---

## ä¸‰ã€æŠ€æœ¯è°ƒç ”

### éœ€è¦çš„æ–°æŠ€æœ¯/åº“

| åŠŸèƒ½æ¨¡å— | æ¨èæŠ€æœ¯ | ç†ç”± |
|---------|----------|------|
| Agent Activity å¯è§†åŒ– | D3.js / Visx | å¤æ‚å›¾è¡¨å’ŒåŠ¨ç”»éœ€æ±‚ |
| å®æ—¶è·¯ç”±æµç¨‹å›¾ | React Flow / Cytoscape.js | èŠ‚ç‚¹æµç¨‹å›¾äº¤äº’ |
| YAML/JSON ç¼–è¾‘å™¨ | Monaco Editor / CodeMirror | ä»£ç ç¼–è¾‘éœ€æ±‚ |
| æ—¥å¿—æµå±•ç¤º | xterm.js / React Virtualized | å¤§é‡æ—¥å¿—æ»šåŠ¨ |
| WebSocket å®æ—¶é€šä¿¡ | å·²æœ‰ | å®æ—¶çŠ¶æ€æ›´æ–° |

### åç«¯ API ä¾èµ–è¯„ä¼°

| åŠŸèƒ½ | éœ€è¦çš„ API | çŠ¶æ€ |
|------|-----------|------|
| SubAgent ç®¡ç† | `/api/v1/agents/subagents/*` | âŒ éœ€è¦æ–°å¢ |
| Skill ç®¡ç† | `/api/v1/skills/*` | âŒ éœ€è¦æ–°å¢ |
| Agent Activity Logs | `/api/v1/agents/{id}/activities` | âš ï¸ éœ€è¦å¢å¼º |
| è·¯ç”±ç»Ÿè®¡ | `/api/v1/agents/router/stats` | âŒ éœ€è¦æ–°å¢ |
| é«˜çº§æœç´¢é…ç½® | `/api/v1/search/advanced` | âš ï¸ éƒ¨åˆ†å®ç° |

---

## å››ã€vendor/opencode å¯¹é½è¿›åº¦

æœ¬æ–‡æ¡£å¯¹ç…§ `vendor/opencode` å‚è€ƒå®ç°ï¼Œè¿½è¸ª MemStack Agent å·¥å…·ç³»ç»Ÿçš„å¯¹é½è¿›åº¦ã€‚

### 4.1 æ–‡ä»¶æ“ä½œå·¥å…·å¯¹é½

| å·¥å…· | vendor/opencode | MemStack | çŠ¶æ€ |
|------|-----------------|----------|------|
| **Edit** | `edit.ts` (646 lines) | `file_edit.py` | âœ… **å·²å¯¹é½** |
| - Simple Replacer | âœ… | âœ… | å·²å®ç° |
| - LineTrimmed Replacer | âœ… | âœ… | å·²å®ç° |
| - BlockAnchor Replacer | âœ… | âœ… | å·²å®ç° |
| - WhitespaceNormalized Replacer | âœ… | âœ… | å·²å®ç° |
| - IndentationFlexible Replacer | âœ… | âœ… | å·²å®ç° |
| - EscapeNormalized Replacer | âœ… | âœ… | å·²å®ç° |
| - Diff generation | âœ… (diff package) | âœ… (difflib) | å·²å®ç° |
| - LSP diagnostics | âœ… | â¸ï¸ å»¶è¿Ÿå®ç° | éå…³é”® |
| **Write** | âœ… `write.ts` | âœ… `file_write.py` | âœ… **å·²å¯¹é½** |
| - File creation | âœ… | âœ… | å·²å®ç° |
| - Permission check | âœ… | âœ… | å·²å®ç° |
| **MultiEdit** | âœ… `multiedit.ts` | âœ… `file_multi_edit.py` | âœ… **å·²å¯¹é½** |
| - Sequential edits | âœ… | âœ… | å·²å®ç° |
| - Atomic operation | âœ… | âœ… | å·²å®ç° |
| **Patch** | âœ… `apply_patch.ts` | â¸ï¸ å»¶è¿Ÿå®ç° | ä½ä¼˜å…ˆçº§ |
| **Read** | âœ… `read.ts` | â¸ï¸ å»¶è¿Ÿå®ç° | ä½ä¼˜å…ˆçº§ |

### 4.2 MCP OAuth å¯¹é½

| ç»„ä»¶ | vendor/opencode | MemStack | çŠ¶æ€ |
|------|-----------------|----------|------|
| **OAuth Provider** | âœ… `oauth-provider.ts` (98 lines) | âœ… `oauth.py` | âœ… **å·²å¯¹é½** |
| - RFC 7591 åŠ¨æ€æ³¨å†Œ | âœ… | âœ… | å·²å®ç° |
| - PKCE æ”¯æŒ | âœ… | âœ… | å·²å®ç° |
| - Token å­˜å‚¨ | âœ… | âœ… | å·²å®ç° |
| - State ç®¡ç† | âœ… | âœ… | å·²å®ç° |
| **OAuth Callback** | âœ… `oauth-callback.ts` | âœ… `oauth_callback.py` | âœ… **å·²å¯¹é½** |
| - HTTP å›è°ƒæœåŠ¡å™¨ | âœ… | âœ… | å·²å®ç° (aiohttp) |
| - State éªŒè¯ (CSRF) | âœ… | âœ… | å·²å®ç° |
| - è¶…æ—¶å¤„ç† | âœ… | âœ… | å·²å®ç° (5åˆ†é’Ÿ) |
| - æˆåŠŸ/å¤±è´¥ HTML | âœ… | âœ… | å·²å®ç° |
| **Auth Storage** | âœ… `auth.ts` (136 lines) | âœ… `oauth.py` | âœ… **å·²å¯¹é½** |
| - Token æŒä¹…åŒ– | âœ… | âœ… | å·²å®ç° |
| - URL éªŒè¯ | âœ… | âœ… | å·²å®ç° |
| - Token è¿‡æœŸæ£€æŸ¥ | âœ… | âœ… | å·²å®ç° |
| - æ–‡ä»¶æƒé™ 0o600 | âœ… | âœ… | å·²å®ç° |

### 4.3 ä»£ç æœç´¢å·¥å…·å¯¹é½

| å·¥å…· | vendor/opencode | MemStack | çŠ¶æ€ |
|------|-----------------|----------|------|
| **Glob** | âœ… `glob.ts` | âœ… `file_glob.py` | âœ… **å·²å¯¹é½** |
| - Pattern matching | âœ… | âœ… | å·²å®ç° |
| - Recursive search (`**/`) | âœ… | âœ… | å·²å®ç° |
| - Exclude patterns | âœ… | âœ… | å·²å®ç° |
| - Max results limit | âœ… | âœ… | å·²å®ç° |
| **Grep** | âœ… `grep.ts` | âœ… `file_grep.py` | âœ… **å·²å¯¹é½** |
| - Content search | âœ… | âœ… | å·²å®ç° |
| - Regex support | âœ… | âœ… | å·²å®ç° |
| - File pattern filter | âœ… | âœ… | å·²å®ç° |
| - Context lines | âœ… | âœ… | å·²å®ç° |
| - Case-insensitive | âœ… | âœ… | å·²å®ç° |
| - Binary file skip | âœ… | âœ… | å·²å®ç° |
| **CodeSearch** | âœ… `codesearch.ts` | â¸ï¸ å»¶è¿Ÿå®ç° | éå…³é”® |

### 4.4 å…¶ä»–å·¥å…·å¯¹é½

| å·¥å…· | vendor/opencode | MemStack | çŠ¶æ€ |
|------|-----------------|----------|------|
| **Bash** | âœ… `bash.ts` (259 lines) | âœ… `code_executor.py` | âš ï¸ **éƒ¨åˆ†å¯¹é½** |
| - Command execution | âœ… | âœ… | å·²å®ç° |
| - Timeout handling | âœ… | âœ… | å·²å®ç° |
| - Tree-sitter parsing | âœ… | âŒ | MemStack ä½¿ç”¨ Docker æ²™ç®± |
| - Docker sandbox | âŒ | âœ… | **MemStack ä¼˜åŠ¿** |
| - S3 file upload | âŒ | âœ… | **MemStack ä¼˜åŠ¿** |
| **WebSearch** | âœ… `websearch.ts` | âœ… `web_search.py` | âœ… **å·²å¯¹é½** |
| **WebFetch** | âœ… `webfetch.ts` | âœ… `web_scrape.py` | âœ… **å·²å¯¹é½** |
| **Task** | âœ… (explore agent) | âŒ | éå…³é”® |
| **TodoWrite/Read** | âœ… | âŒ | éå…³é”® |
| **Question** | âœ… | âœ… `ask_clarification.py` | âœ… **å·²å¯¹é½** |
| **Skill** | âœ… | âœ… `skill_loader.py` | âœ… **å·²å¯¹é½** |
| **Plan** | âœ… | âœ… `plan_*.py` | âœ… **å·²å¯¹é½** |

### 4.5 å·¥å…·è¾“å‡ºæˆªæ–­å¯¹é½

| åŠŸèƒ½ | vendor/opencode | MemStack | çŠ¶æ€ |
|------|-----------------|----------|------|
| **å­—èŠ‚çº§æˆªæ–­** | âœ… `read.ts` | âœ… `truncation.py` | âœ… **å·²å¯¹é½** |
| - MAX_OUTPUT_BYTES (50KB) | âœ… | âœ… | å·²å®ç° |
| - MAX_LINE_LENGTH (2000) | âœ… | âœ… | å·²å®ç° |
| - UTF-8 å¤šå­—èŠ‚å¤„ç† | âœ… | âœ… | å·²å®ç° |
| **è¡Œçº§æˆªæ–­** | âœ… | âœ… | âœ… **å·²å¯¹é½** |
| - offset/limit åˆ†é¡µ | âœ… | âœ… | å·²å®ç° |
| - è¡Œå·æ ¼å¼åŒ– | âœ… | âœ… | å·²å®ç° |
| - æˆªæ–­æç¤ºä¿¡æ¯ | âœ… | âœ… | å·²å®ç° |
| **AgentTool é›†æˆ** | âœ… | âœ… | âœ… **å·²å¯¹é½** |
| - è‡ªåŠ¨æˆªæ–­ | âœ… | âœ… | å·²å®ç° |
| - å¯é…ç½®é™åˆ¶ | âœ… | âœ… | å·²å®ç° |

**å®ç°æ–‡ä»¶**:
- `src/infrastructure/agent/tools/truncation.py` (260 lines)
- `src/infrastructure/agent/tools/base.py` (é›†æˆ)
- `src/tests/unit/test_truncation.py` (37 ä¸ªæµ‹è¯•å…¨éƒ¨é€šè¿‡)

### 4.6 MemStack ç‹¬æœ‰å·¥å…·

| å·¥å…· | è¯´æ˜ |
|------|------|
| **MemorySearch** | è¯­ä¹‰è®°å¿†æœç´¢ (vendor/opencode æ— æ­¤èƒ½åŠ›) |
| **MemoryCreate** | åˆ›å»ºæ–°è®°å¿† |
| **EntityLookup** | çŸ¥è¯†å›¾è°±å®ä½“æŸ¥è¯¢ |
| **GraphQuery** | Cypher å›¾æŸ¥è¯¢ |
| **EpisodeRetrieval** | Episode æ£€ç´¢ |
| **Summary** | å†…å®¹æ‘˜è¦ç”Ÿæˆ |

### 4.7 å½“å‰å·®è·

#### ğŸ”´ é«˜ä¼˜å…ˆçº§ (P0)

| å·®è· | å½±å“ | è®¡åˆ’ |
|------|------|------|
| **Patch Tool** | æ— æ³•åº”ç”¨ unified patch æ ¼å¼ | ä¸‹è½®å®ç° |
| **ä¸Šä¸‹æ–‡å‹ç¼©** (ContextCompaction) | é•¿å¯¹è¯ token æµªè´¹ | âœ… å·²å®ç° |
| **å·¥å…·è¾“å‡ºæˆªæ–­** (Truncation) | å¤§è¾“å‡º token æµªè´¹ | âœ… å·²å®ç° |
| **LSP é›†æˆ** | æ—  IDE è¯Šæ–­ä¿¡æ¯ | å¯é€‰åŠŸèƒ½ |

#### ğŸŸ¡ ä¸­ä¼˜å…ˆçº§ (P1)

| å·®è· | å½±å“ | è®¡åˆ’ |
|------|------|------|
| *(æ— æ–°å¢ P1 å·®è·)* | - | - |

#### ğŸŸ¢ ä½ä¼˜å…ˆçº§ (P2)

| å·®è· | å½±å“ | è®¡åˆ’ |
|------|------|------|
| **CodeSearch** | æ— è¯­ä¹‰ä»£ç æœç´¢ | å¯é€‰ |
| **LSP æ”¯æŒ** | æ— è·³è½¬å®šä¹‰/è¯Šæ–­ | å¯é€‰ |
| **TodoWrite** | æ—  TODO ç®¡ç† | å¯é€‰ |

### 4.8 æ€»ä½“å®Œæˆåº¦

```
æ–‡ä»¶æ“ä½œå·¥å…·:     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% (5/5 æ ¸å¿ƒå·¥å…·)
MCP OAuth è®¤è¯:    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% (3/3 æ ¸å¿ƒç»„ä»¶)
ä¸Šä¸‹æ–‡å‹ç¼©:        â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% (3/3 æ ¸å¿ƒåŠŸèƒ½)
ä»£ç æœç´¢å·¥å…·:     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% (2/2 æ ¸å¿ƒå·¥å…·)
Web å·¥å…·:         â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% (2/2)
æ‰§è¡Œå·¥å…·:         â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘  75% (3/4)
å¯¹è¯å·¥å…·:         â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘  75% (3/4)

æ€»ä½“å®Œæˆåº¦:       â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  95%+
```

**æœ¬è½®è¿­ä»£ (2026-01-22)**: å®Œæˆä¸Šä¸‹æ–‡å‹ç¼©æ¨¡å—ï¼ˆisOverflow/pruneToolOutputs/summarizeMessagesï¼‰ï¼Œ41 ä¸ªå•å…ƒæµ‹è¯•å…¨éƒ¨é€šè¿‡ï¼Œæ›´æ–°æ–‡æ¡£ã€‚

---

## äº”ã€å¼€å‘ä»»åŠ¡æ‹†è§£

### Phase 1: æ ¸å¿ƒåŠŸèƒ½è¡¥å…¨ (é¢„è®¡ 8-10 å¤©)

#### ä»»åŠ¡ 1.1: Agent Activity Log & Visualization
- **å­ä»»åŠ¡ 1.1.1**: åˆ›å»º `AgentActivityLog` ç»„ä»¶
- **å­ä»»åŠ¡ 1.1.2**: å®ç°å®æ—¶æ—¥å¿—æµ WebSocket è¿æ¥
- **å­ä»»åŠ¡ 1.1.3**: åˆ›å»ºå·¥å…·è°ƒç”¨æ—¶é—´çº¿å¯è§†åŒ–
- **å­ä»»åŠ¡ 1.1.4**: æ·»åŠ  Token ä½¿ç”¨é‡å›¾è¡¨
- **ä¼°æ—¶**: 3 å¤©

#### ä»»åŠ¡ 1.2: SubAgent Management åŸºç¡€
- **å­ä»»åŠ¡ 1.2.1**: åˆ›å»º SubAgent åˆ—è¡¨é¡µé¢
- **å­ä»»åŠ¡ 1.2.2**: å®ç° SubAgent åˆ›å»º/ç¼–è¾‘æ¨¡æ€æ¡†
- **å­ä»»åŠ¡ 1.2.3**: æ·»åŠ çŠ¶æ€ç›‘æ§å¡ç‰‡
- **ä¼°æ—¶**: 2 å¤©

#### ä»»åŠ¡ 1.3: Skill Registry åŸºç¡€
- **å­ä»»åŠ¡ 1.3.1**: åˆ›å»º Skill åˆ—è¡¨é¡µé¢
- **å­ä»»åŠ¡ 1.3.2**: é›†æˆ Monaco Editor
- **å­ä»»åŠ¡ 1.3.3**: å®ç° YAML é…ç½®é¢„è§ˆ
- **ä¼°æ—¶**: 2 å¤©

#### ä»»åŠ¡ 1.4: Memory Graph å¢å¼º
- **å­ä»»åŠ¡ 1.4.1**: æ·»åŠ èŠ‚ç‚¹è¯¦æƒ…ä¾§è¾¹é¢æ¿
- **å­ä»»åŠ¡ 1.4.2**: å®ç°å…³ç³»æ ‡ç­¾æ˜¾ç¤º
- **å­ä»»åŠ¡ 1.4.3**: æ·»åŠ å›¾ä¾‹å’Œå·¥å…·æ 
- **ä¼°æ—¶**: 2 å¤©

### Phase 2: é«˜çº§åŠŸèƒ½ (é¢„è®¡ 5-7 å¤©)

#### ä»»åŠ¡ 2.1: SubAgent Router Dashboard
- **å­ä»»åŠ¡ 2.1.1**: åˆ›å»ºè·¯ç”±å¯è§†åŒ–ç»„ä»¶ (React Flow)
- **å­ä»»åŠ¡ 2.1.2**: å®ç°ä»»åŠ¡åˆ†å‘ç»Ÿè®¡
- **å­ä»»åŠ¡ 2.1.3**: æ·»åŠ æ€§èƒ½çŸ©é˜µè¡¨æ ¼
- **ä¼°æ—¶**: 3 å¤©

#### ä»»åŠ¡ 2.2: Smart Search å¢å¼º
- **å­ä»»åŠ¡ 2.2.1**: æ·»åŠ é«˜çº§é…ç½®é¢æ¿
- **å­ä»»åŠ¡ 2.2.2**: å®ç°æ£€ç´¢æ¨¡å¼åˆ‡æ¢
- **å­ä»»åŠ¡ 2.2.3**: æ·»åŠ å›¾è°±é¢„è§ˆ
- **ä¼°æ—¶**: 2 å¤©

#### ä»»åŠ¡ 2.3: Memory Detail å¢å¼º
- **å­ä»»åŠ¡ 2.3.1**: å®ç°å¤šæ ‡ç­¾é¡µ
- **å­ä»»åŠ¡ 2.3.2**: æ·»åŠ çŸ¥è¯†ä¸Šä¸‹æ–‡ä¾§è¾¹æ 
- **å­ä»»åŠ¡ 2.3.3**: æ·»åŠ ç›¸å…³è®°å¿†åˆ—è¡¨
- **ä¼°æ—¶**: 2 å¤©

### Phase 3: å®Œå–„ä¸ä¼˜åŒ– (é¢„è®¡ 3-5 å¤©)

#### ä»»åŠ¡ 3.1: Operator Agent Sandbox
- **ä¼°æ—¶**: 2 å¤©

#### ä»»åŠ¡ 3.2: Pattern Laboratory
- **ä¼°æ—¶**: 2 å¤©

#### ä»»åŠ¡ 3.3: UI/UX ç»†èŠ‚ä¼˜åŒ–
- åŠ¨ç”»æ•ˆæœã€è¿‡æ¸¡ã€å›¾æ ‡ç­‰
- **ä¼°æ—¶**: 1 å¤©

---

## å…­ã€ä¼˜å…ˆçº§æ’åº

### Phase 1: æ ¸å¿ƒåŠŸèƒ½è¡¥å…¨

### å¿…é¡»å®Œæˆ (MVP)
1. Agent Activity Log å¯è§†åŒ–
2. SubAgent Management åŸºç¡€
3. Memory Graph å¢å¼º

### åº”è¯¥å®Œæˆ (Important)
4. Skill Registry åŸºç¡€
5. Smart Search å¢å¼º
6. Memory Detail å¢å¼º

### å¯ä»¥å»¶å (Nice to Have)
7. SubAgent Router Dashboard
8. Operator Agent Sandbox
9. Pattern Laboratory

---

## ä¸ƒã€ç»Ÿè®¡æ‘˜è¦

| ç±»åˆ« | æ•°é‡ |
|------|------|
| è®¾è®¡ç¨¿æ€»æ•° | 52 ä¸ªé¡µé¢ |
| âœ… å·²å®ç° | 15 ä¸ªé¡µé¢ |
| âš ï¸ éƒ¨åˆ†å®ç° | 8 ä¸ªé¡µé¢ |
| âŒ æœªå®ç° | 29 ä¸ªé¡µé¢ |
| **å®Œæˆç‡** | **~29%** |

### é¢„ä¼°æ€»å·¥ä½œé‡
- **Phase 1 (æ ¸å¿ƒåŠŸèƒ½)**: 8-10 å¤©
- **Phase 2 (é«˜çº§åŠŸèƒ½)**: 5-7 å¤©  
- **Phase 3 (å®Œå–„ä¼˜åŒ–)**: 3-5 å¤©
- **æ€»è®¡**: çº¦ 16-22 å¤©
