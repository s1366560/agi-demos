# MemStack Configuration ConfigMap
apiVersion: v1
kind: ConfigMap
metadata:
  name: memstack-config
  namespace: memstack
data:
  # API Settings
  API_HOST: "0.0.0.0"
  API_PORT: "8000"
  API_WORKERS: "4"
  API_ALLOWED_ORIGINS: "*"

  # Database URLs (use external services via service names)
  NEO4J_URI: "bolt://memstack-neo4j:7687"
  NEO4J_USER: "neo4j"
  POSTGRES_HOST: "memstack-postgres"
  POSTGRES_PORT: "5432"
  POSTGRES_DB: "memstack"
  POSTGRES_USER: "postgres"
  REDIS_HOST: "memstack-redis"
  REDIS_PORT: "6379"

  # Pool Settings for High Concurrency
  POSTGRES_POOL_SIZE: "20"
  POSTGRES_MAX_OVERFLOW: "40"
  POSTGRES_POOL_RECYCLE: "3600"
  POSTGRES_POOL_PRE_PING: "true"

  # LLM Settings
  LLM_TIMEOUT: "60"
  LLM_CACHE_ENABLED: "true"
  LLM_CACHE_TTL: "3600"

  # Graphiti Settings
  GRAPHITI_SEMAPHORE_LIMIT: "10"
  MAX_ASYNC_WORKERS: "20"
  RUN_BACKGROUND_WORKERS: "true"
  QUEUE_BATCH_SIZE: "1"

  # Monitoring
  ENABLE_METRICS: "true"
  METRICS_PORT: "9090"
  ENABLE_TELEMETRY: "true"
  SERVICE_NAME: "memstack"
  ENVIRONMENT: "production"

  # Logging
  LOG_LEVEL: "INFO"
  LOG_FORMAT: "json"
